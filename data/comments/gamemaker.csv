gamemaker,3e4vlw,DestinedHero,5,Tue Jul 21 23:47:08 2015 UTC,keyboard_lastkey  I just learned about it the other day. What a coincidence. :P  P.S. Happy Cake Day!
gamemaker,3e4vlw,DestinedHero,1 point,Tue Jul 21 23:49:18 2015 UTC,Thanks so much.
gamemaker,3e4vlw,DestinedHero,1 point,Tue Jul 21 23:50:55 2015 UTC,"When I'm typing the function, it has the autofill thing for it, although when I put it in, it tells me it's an unknown script or function. Here's what I've typed in:   if (keyboard_lastkey(vk_up)) {             image_speed = 0;             sprite_index = sprite_character_stand_up             }"
gamemaker,3e4vlw,DestinedHero,2,Wed Jul 22 00:03:17 2015 UTC,"""keyboard_lastkey"" is a variable that stores the last key. It's not a function, so you don't need the (vk_up) part. The correct way to write that would be:  if (keyboard_lastkey == vk_up) {     image_speed = 0;     sprite_index = sprite_character_stand_up; }   Glad to help. :)"
gamemaker,3e4vlw,torey0,1 point,Wed Jul 22 00:11:16 2015 UTC,"Now it replaces my running upwards animation, though"
gamemaker,3e4vlw,devlkore,1 point,Wed Jul 22 00:26:31 2015 UTC,I see you posted your code below. Here's a simple fix for that:  if (keyboard_check(vk_nokey)) {     image_speed = 0;     if (keyboard_lastkey == vk_up) {         sprite_index = sprite_character_stand_up     } else {         sprite_index = sprite_character_stand;     } }
gamemaker,3e4vlw,devlkore,2,Wed Jul 22 00:41:02 2015 UTC,"I fixed it, but the problem with that is that even WHILE you're pressing the key, it's considered the last key you pressed. You need to set it to detect your last key AND whether or not you're pressing any key.  Here's the fixed code:               if (keyboard_lastkey == vk_up) && keyboard_check(vk_nokey){                 image_speed = 0;                 sprite_index = sprite_character_stand_up                 }"
gamemaker,3e4vlw,mundaneclipclop,1 point,Wed Jul 22 01:28:10 2015 UTC,"Well, there you go. Glad you got it working. Takes some brainpower sometimes, but if you're persistent, you can (almost) always figure it out, lol"
gamemaker,3e3tr9,potatomasterss,3,Tue Jul 21 19:13:39 2015 UTC,"Check this out, It might look complicated at first but go thru it and you will never do things without it. Link."
gamemaker,3e3tr9,FEISTYBEARD,3,Tue Jul 21 19:26:01 2015 UTC,"Try using a 'switch' statement:  switch(state)     {     case ""powerup"":         // lots of code         break;      case ""confused"":         // lots of code         break;      default:         // lots of code         break;     }   If you don't know the structure or how to use switch statements, look them up in the manual."
gamemaker,3e3tr9,kbjwes77,2,Tue Jul 21 20:24:19 2015 UTC,"This does not make it a state machine though. Before I understood the concept of them, I implemented a switch setup. State machine, done! Except, it wasn't a state machine.  As far as I understand, the key component of a state machine is that each state controls the next state, which your above setup doesn't necessarily."
gamemaker,3e3tr9,Grogrog,3,Tue Jul 21 23:28:06 2015 UTC,The key component of the state machine is states. Each state is in control of what other states it can move in and out of. lbjwes77's example is spot on.
gamemaker,3e3tr9,leinappropriate,2,Tue Jul 21 23:38:44 2015 UTC,"That's true, however I wouldn't say it's not a FSM just because it lacks explicit triggers, it's just a more simple FSM.  A switch statement is not inherently a state machine, but a state machine can be comprised of simply a switch statement. Obviously if there were no triggers, the state would never change and the switch statement would be useless. So although it's omitted in my example, clearly there will be something changing the states. These are the triggers you are talking about, and those triggers coupled with the switch statement make up the complete (although simple) FSM.  tl;dr: trigger warning"
gamemaker,3e3tr9,kbjwes77,2,Tue Jul 21 23:49:58 2015 UTC,https://www.reddit.com/r/gamemaker/comments/353aq6/tutorialexample_finite_state_machines_the_most/  Great tutorial. Feistybeard also linked another of pixelated popes tutorials.
gamemaker,3e5b0w,bussianranana,2,Wed Jul 22 01:54:00 2015 UTC,Have you tried looking into verlet integration?
gamemaker,3e52nl,Bolteriest,2,Wed Jul 22 00:44:55 2015 UTC,"//collision_ray(x1,y1,x2,y2,obj) var xx1,yy1,xx2,yy2,xx,yy; xx1=argument0; yy1=argument1; xx=argument2; yy=argument3; xx2=xx; yy2=yy; if (collision_line(xx1,yy1,xx,yy,argument4,1,1)<0)     return -1;//early out  while(point_distance(xx1,yy1,xx,yy)) {     if (collision_line(xx1,yy1,xx,yy,argument4,1,1))     {         xx2=xx;         yy2=yy;     }     else     {         xx1=xx;         yy1=yy;     }     xx=(xx1+xx2)/2;     yy=(yy1+yy2)/2; }  return instance_position(xx, yy, argument4);"
gamemaker,3e52nl,eposnix,2,Wed Jul 22 00:53:52 2015 UTC,"thank you for the code, its just like a said im not yet too familiar with coding and gml synthax, what do i do with this? sorry for my beginnerness... (like in what kind of event do i put this? in my player's object?"
gamemaker,3e52nl,eposnix,3,Wed Jul 22 00:56:42 2015 UTC,"I went ahead and created an example project illustrating how this works, since my explanation probably left something to be desired ;)  You can find it here: https://www.dropbox.com/s/tw9le50s5wj5sy5/ShooterExample.gmz?dl=0  Just import the project into Gamemaker. Left mouse fires and the direction keys move."
gamemaker,3e52nl,eposnix,2,Wed Jul 22 01:57:21 2015 UTC,"okay thank you, ill try to implement this code in my project to see how it works more ""directly"", but again thank you a lot for your help and time."
gamemaker,3e52nl,redekker,2,Wed Jul 22 02:21:03 2015 UTC,"Make a new script and stick that code in it and call it collision_ray  What this code does is trace a line from the x1, y1 point to the x2, y2 point and returns the instance it finds there, if any. This is useful for bullet effects that are instantaneous. So if the player is facing to the right, you can use the script like so:  var bullet_impact = collision_ray( player.x, player.y, player.x+300, player.y, obj_enemy ); if bullet_impact != noone {     bullet_impact.HP -= 10; }   So that code will shoot a bullet, instantaneously, 300 pixels to the right of the player. If there is an enemy in that area, the enemy will lose 10 hp. You can stick this code in the event that handles your player shooting."
gamemaker,3e52nl,eposnix,1 point,Wed Jul 22 00:58:54 2015 UTC,"Since there are no projectiles to calculate collision, you probably want to do it with a line collision detection. The following method will provide whether you have hit the enemy:  collision_line(x1,y1,x2,y2,obj,prec,notme);   Since it's the player doing the shooting, I would assume that the code could go something like this:  if (mouse_check_button_released(mb_left) and collision_line(obj_player.x,obj_player.y,mouse_x,mouse_y,obj_enemy,false,true){     <code for the shooting>   }  As to how to proceed from here, it depends on how you want to approach it. If you don't care where the enemy is hit, just paint a few sprites on the enemy getting hit and switch state on the enemy to animate it so; otherwise... it gets more complicated. As far as I can think, you would have to calculate the point of impact (at which point of the invisible line the actual line collides with the enemy) then create a temporary object representing the bullet hit splashing blood or whatever whose position updates with the enemy and deletes itself after the animation.  My code above also assumes that there is some hierarchy among enemies. I used the generic object obj_enemy that should be the parent of all your enemies for this to work.  Edit: if you're using views and manipulating them, you might want to use window_view_mouse_get_x(0) and window_view_mouse_get_y(0) instead of mouse_x and mouse_y."
gamemaker,3e52nl,redekker,2,Wed Jul 22 01:04:50 2015 UTC,"I posted the collision_ray script above because collision_line doesn't necessarily get the instance closest to the player when it returns... it can pick one in the middle or on the far side which makes the bullet effect seem wonky. Collision_ray stops when it hits an instance closest to the point you are sending it out from, which generally makes for a better effect."
gamemaker,3e2yk7,mooomooomooomooo,1 point,Tue Jul 21 15:39:28 2015 UTC,"I think you might be resetting the animation every time you do the sprite_index = <sprite reference>.  Try to assign the sprite at the end of the code, when you already know what direction you're going to take, and do it in a way that the assignment only happens if the intended new sprite is different from the sprite you were using before.  Hope that helps."
gamemaker,3e2yk7,redekker,1 point,Tue Jul 21 16:01:50 2015 UTC,Try assigning image_index to zero every time you change the sprite_index.
gamemaker,3e38ks,lovrotheunicorn,1 point,Tue Jul 21 16:50:24 2015 UTC,"In a project of mine I have my player move over tiles on layer 1000000. Your code made my player invisible under those tiles. Once I set my player depth to -112, it was visible on the 7 top rows and went under the tiles below that line.  Maybe that can help ? Otherwise, what makes you think your code doesn't work ?"
gamemaker,3e0zl0,Parkmayn,2,Tue Jul 21 03:04:07 2015 UTC,try putting it in the Draw event
gamemaker,3e0zl0,subjectgames,2,Tue Jul 21 04:56:44 2015 UTC,Have you tried making sure your background properties object is one of the first processed when you room is built?
gamemaker,3e0zl0,mundaneclipclop,2,Tue Jul 21 10:10:00 2015 UTC,"I thought about that, but how do I do that without deleting every object, placing the scroller, and then replacing all the other objects?"
gamemaker,3e0zl0,mundaneclipclop,1 point,Tue Jul 21 12:18:41 2015 UTC,"There is an instance sorter on the room editor screen. I'm not infront of it now otherwise I'd be able to describe it to you. But that gives you the option to move certain instances up or down priority wise. Edit: instance ordering it's called. Near the far right - right of snap x, snap y etc."
gamemaker,3e0zl0,mundaneclipclop,1 point,Tue Jul 21 12:31:21 2015 UTC,"I'm not seeing it. It may help to know that I'm using game maker, not studio."
gamemaker,3e0zl0,rainsstudios,1 point,Tue Jul 21 12:54:50 2015 UTC,Could try creating the instance within the Room's creation code. I'm not familiar with anything before studio I'm afraid.
gamemaker,3e0zl0,rainsstudios,1 point,Tue Jul 21 13:51:10 2015 UTC,Couldn't you use the object create event?
gamemaker,3e0opj,Justpassingthrough32,5,Tue Jul 21 01:34:40 2015 UTC,I sorta just used YouTube tutorials and ran with it. Check out Shaun Spalding! Awesome resource
gamemaker,3e0opj,rainsstudios,1 point,Tue Jul 21 02:37:34 2015 UTC,Thanks! I'll check it out!
gamemaker,3e0opj,devlkore,4,Tue Jul 21 03:00:23 2015 UTC,"I second Shaun Spalding. Also check out heartbeast, rm2kdev and Tom Francis. Have fun with your learning."
gamemaker,3e0opj,redekker,2,Tue Jul 21 08:00:38 2015 UTC,Thanks for sharing. I spent some time on Shaun Spalding's videos last night and this is exactly what I was looking for. Thanks guys!
gamemaker,3e0opj,ChocolateMilk-Senpai,2,Tue Jul 21 14:28:07 2015 UTC,Thirding Shaun Spalding and seconding Tom Francis.
gamemaker,3e0opj,devlkore,1 point,Tue Jul 21 14:59:40 2015 UTC,Tom Francis is amazing. Never seen his videos though. I've just played gunpoint and waiting for heat signature.
gamemaker,3e0opj,ChocolateMilk-Senpai,1 point,Tue Jul 21 22:42:44 2015 UTC,Worth checking out. He goes over a lot of his design process and has a tutorial series on making a game with no experience.
gamemaker,3e0c1o,mooomooomooomooo,2,Mon Jul 20 23:50:42 2015 UTC,"The answer is in your question: ""if"" the player is facing a certain direction, then change the sprite_index."
gamemaker,3e0c1o,torey0,1 point,Tue Jul 21 00:48:41 2015 UTC,"I should've phrased the question better: I need to know how to change the sprite when the player is moving in a direction, not facing a direction. How could I go from what I have here?  //Movement  if keyboard_check(ord('W')) {y -= 5} if keyboard_check(ord('S')) {y += 5} if keyboard_check(ord('A')) {x -= 5} if keyboard_check(ord('D')) {x += 5}"
gamemaker,3e0c1o,torey0,2,Tue Jul 21 02:13:38 2015 UTC,"Instead of incrementing x/y directly, change speed or hspeed/vspeed. Then you can change the sprite based on that. Alternatively if you don't wanna use built in speed, setup a temp variable like xx/yy, add your 5 to them and check xx/yy for which sprite facing to use."
gamemaker,3e0c1o,AtlaStar,1 point,Tue Jul 21 02:43:19 2015 UTC,"I'll try this. Thanks.  EDIT: Worked, thank you very much :)"
gamemaker,3e0c1o,ckau,1 point,Tue Jul 21 02:46:01 2015 UTC,"Bitwise operations my friend....  var dir = 0; dir = (keyboard_check(ord('W')) << 3) | (keyboard_check(ord('S')) << 2) |             (keyboard_check(ord('A')) << 1) | keyboard_check(ord('D'))   That gives you a 4 bit bitmask meaning a potential of 16 different direction values..it has to be a 16 bit mask since a 0 value is equal to no movement...and since you probably don't want movement when two opposing keys are pressed (as your code above would literally not move the character), that means 4 of those states won't cause movement (specifically binary 1100, 0011, 1111, and 0000), and 4 of them would be a single direction for 8 directional movement. In real digits it would equate to this  W    = 8 or 11 (1000 or 1011 A and D flags you probably want to cancel so movement as W) S     = 4 or 7   (0100 or 0111 Same as above, movement as S) A     = 2 or 14 (0010 or 1110 W and S flags should be canceled so movement as A) D     = 1 or 13 (0001 or 1101 same, movement as D) WA  = 10 (1010) WD  =  9 (1001) SA   =  6 (0110) SD   =  5 (0101)   I assume you want 8 directional movement based on your code above, and you could just use a case statement or multiple if statements to change the image index based on the value of the bitmask...but if you did only want 4 directional movement, you just change the image index inside each keyboard check that you have in your code above...it should also be mentioned there are a million ways to approach this, I just like bitmasking since there is a lot you can do with it later...for example, moonwalking by using the bitwise negation operator (~)...why would you want moonwalking? Idk...it was just an easy example lol...this method also allows you to use the extra bitmasks generated to do slightly altered animations if they were attempting to press too many keys for the direction they were moving....idk my way is probably harder than it needs to be but I like my way damnit!!!! lol"
gamemaker,3e0c1o,KJaguar,2,Tue Jul 21 04:01:42 2015 UTC,"Something pretty fast - do  WayHeading=round(direction/4)   so if you have sprite with four frames in it you can do  image_index=WayHeading   Otherwise (if you have no direction) you should play around with   //frame 1 is for left and frame 3 if for right, 0 is for top and 2 is for bottom if hspeed>vspeed image_index=sign(hspeed)+2 else image_index=sign(vspeed)+1"
gamemaker,3e0c1o,ONLINEMAN_,1 point,Tue Jul 21 00:56:37 2015 UTC,"var dir_last = round(direction/90);  var v = keyboard_check(ord('S')) - keyboard_check(ord('W')); var h = keyboard_check(ord('D')) - keyboard_check(ord('A'));  if (v != 0 or h != 0) {     speed = 32 / room_speed;         direction = darctan2(v, h);      var dir = round(direction/90);     if (dir != dir_last)     {         image_index = 0;         switch (dir)         {             default:             case 0: sprite_index = spr_player_right; break;             case 1: sprite_index = spr_player_up;    break;             case 2: sprite_index = spr_player_left;  break;             case 3: sprite_index = spr_player_down;  break;         }     } } else     speed = 0;   The code should be straight-forward. If you have any questions, feel free to ask."
gamemaker,3dxofd,flabby__fabby,1 point,Mon Jul 20 11:42:40 2015 UTC,Congratulations!   The game looks completely ridiculous and I love it.
gamemaker,3dxofd,UnsocialPanda,1 point,Mon Jul 20 15:34:54 2015 UTC,Cool. Makes me happy
gamemaker,3dxofd,BufferStrike,1 point,Mon Jul 20 16:25:55 2015 UTC,Congrats dood!
